{#
 *
 * Recent Topics. An extension for the phpBB Forum Software package.
 *
 * @copyright (c) 2022, IMC, https://github.com/IMC-GER / LukeWCS, https://github.com/LukeWCS
 * @copyright (c) 2017, Sajaki, https://www.avathar.be
 * @copyright (c) 2015, PayBas
 * @license GNU General Public License, version 2 (GPL-2.0-only)
 *
 * Based on the original NV Recent Topics by Joas Schilling (nickvergessen)
 #}

{% include 'overall_header.html' %}

<h1>{{ lang('RECENT_TOPICS') }}</h1>
<p>{{ lang('RECENT_TOPICS_EXPLAIN') }}</p>

<form id="acp_board" method="post" action="{{ U_ACTION }}">

	<fieldset>
		<legend>{{ lang('RT_GLOBAL_SETTINGS') }}</legend>

		<dl>
			<dt>
				<label>{{ lang('INDEX') ~ lang('COLON') }}</label><br><span>{{ lang('RT_DISPLAY_INDEX') }}</span>
			</dt>
			<dd>
				{{ _self.switch('rt_enable', RT_INDEX) }}
			</dd>
		</dl>

		<dl>
			<dt>
				<label>{{ lang('RT_PAGE_NUMBERMAX') ~ lang('COLON') }}</label><br><span>{{ lang('RT_PAGE_NUMBERMAX_EXP') }}</span>
			</dt>
			<dd>
				<input type="number" name="rt_page_numbermax" size="3" min="1" max="999" value="{{ RT_PAGE_NUMBERMAX }}">
			</dd>
		</dl>

		<dl>
			<dt>
				<label>{{ lang('RT_PAGE_NUMBER') ~ lang('COLON') }}</label><br><span>{{ lang('RT_PAGE_NUMBER_EXP') }}</span>
			</dt>
			<dd>
				{{ _self.switch('rt_page_number', RT_PAGE_NUMBER) }}
			</dd>
		</dl>

		<dl>
			<dt>
				<label>{{ lang('RT_MIN_TOPIC_LEVEL') ~ lang('COLON') }}</label><br><span>{{ lang('RT_MIN_TOPIC_LEVEL_EXP') }}</span>
			</dt>
			<dd>
				{{ _self.select('rt_min_topic_level', loops.topiclevel_row) }}
			</dd>
		</dl>

		<dl>
			<dt>
				<label>{{ lang('RT_ANTI_TOPICS') ~ lang('COLON') }}</label><br><span>{{ lang('RT_ANTI_TOPICS_EXP') }}</span>
			</dt>
			<dd>
				<input type="text" name="rt_anti_topics" size="30" value="{{ RT_ANTI_TOPICS }}">
			</dd>
		</dl>

		<dl>
			<dt>
				<label>{{ lang('RT_PARENTS') ~ lang('COLON') }}</label><br><span>{{ lang('RT_PARENTS_EXP') }}</span>
			</dt>
			<dd>
				{{ _self.switch('rt_parents', RT_PARENTS) }}
			</dd>
		</dl>
	</fieldset>

	<fieldset>
		<legend>{{ lang('RT_OVERRIDABLE') }}</legend>

		<dl>
			<dt>
				<label>{{ lang('RT_LOCATION') ~ lang('COLON') }}</label><br><span>{{ lang('RT_LOCATION_EXP') }}</span>
			</dt>
			<dd>
				{{ _self.select('rt_location', loops.location_row) }}
			</dd>
		</dl>

		<dl>
			<dt>
				<label>{{ lang('RT_NUMBER') ~ lang('COLON') }}</label><br><span>{{ lang('RT_NUMBER_EXP') }}</span>
			</dt>
			<dd>
				<input type="number" name="rt_number" size="3" min="0" max="999" value="{{ RT_NUMBER }}">
			</dd>
		</dl>

		<dl>
			<dt>
				<label>{{ lang('RT_SORT_START_TIME') ~ lang('COLON') }}</label><br><span>{{ lang('RT_SORT_START_TIME_EXP') }}</span>
			</dt>
			<dd>
				{{ _self.switch('rt_sort_start_time', RT_SORT_START_TIME) }}
			</dd>
		</dl>

		<dl>
			<dt>
				<label>{{ lang('RT_UNREAD_ONLY') ~ lang('COLON') }}</label><br><span>{{ lang('RT_UNREAD_ONLY_EXP') }}</span>
			</dt>
			<dd>
				{{ _self.switch('rt_unread_only', RT_UNREAD_ONLY) }}
			</dd>
		</dl>

		<hr>

		<dl>
			<dt>
				<label>{{ lang('RT_RESET_DEFAULT') ~ lang('COLON') }}</label><br><span>{{ lang('RT_RESET_DEFAULT_EXP') }}</span>
			</dt>
			<dd>
				{{ _self.switch('rt_reset_default') }}
				{{ _self.confirmbox('rt_reset_default', lang('RT_RESET_ASK_BEFORE_EXP')) }}
			</dd>
		</dl>
	</fieldset>


	{% if S_RT_NEWSPAGE %}
	<fieldset>
		<legend>{{ lang('RT_VIEW_ON') }}</legend>

		<dl>
			<dt>
				<label>{{ lang('RT_NICKVERGESSEN_NEWSPAGE') ~ lang('COLON') }}</label>
			</dt>
			<dd>
				{{ _self.switch('rt_on_newspage', RT_ON_NEWSPAGE) }}
			</dd>
		</dl>
	</fieldset>
	{% endif %}

	<fieldset>
		<legend>{{ lang('ACP_SUBMIT_CHANGES') }}</legend>

		<p class="submit-buttons">
			<input class="button1" type="submit" id="submit" name="submit" value="{{ lang('SUBMIT') }}">
			<input class="button2" type="reset"  id="reset" name="reset" value="{{ lang('RESET') }}">
		</p>
	</fieldset>

	<fieldset>
		<legend>{{ lang('RT_DONATE') }}</legend>

		<dl>
			<dt>
				<label>{{ lang('RT_DONATE_SHORT') ~ lang('COLON') }}</label><br><span>{{ lang('RT_DONATE_EXPLAIN') }}</span>
			</dt>
			<dd>
				<a href="{{ lang('RT_DONATE_URL') }}" target="_blank"><img src="{{ lang('RT_PAYPAL_IMAGE_URL') }}" border="0" alt="{{ lang('RT_PAYPAL_ALT') }}" style="cursor:pointer"></a>
			</dd>
		</dl>
	</fieldset>

	{{ S_FORM_TOKEN }}
</form>

{% include 'overall_footer.html' %}

{% INCLUDECSS '@paybas_recenttopics/acp_toggle.css' %}
{% INCLUDECSS '@paybas_recenttopics/acp_confirm.css' %}
{% INCLUDEJS  '@paybas_recenttopics/acp_confirm.js' %}

{% macro switch(name, checked = false) -%}
	<input type="checkbox" class="toggle" name="{{ name }}" value="1"{{ checked ? ' checked' }}>
{%- endmacro %}

{% macro select(name, array) -%}
	<select class="input" name="{{ name }}">
		{% for array_row in array %}
			<option value="{{ array_row.VALUE }}"{{ array_row.SELECTED }}>{{ array_row.OPTION }}</option>
		{% endfor %}
	</select>
{%- endmacro %}

{% macro confirmbox(name, message, default = false) -%}
	<div id="{{ name }}_confirmbox" data-default="{{ default }}" style="display: none;">
		<h2>{{ lang('CONFIRM') }}</h2>
		<p>{{ message }}</p>
		<p class="submit-buttons">
			<input type="button" class="button1" name="{{ name }}_confirm_yes" value="{{ lang('YES') }}">&nbsp;
			<input type="button" class="button2" name="{{ name }}_confirm_no" value="{{ lang('NO') }}">
		</p>
	</div>
{%- endmacro %}
